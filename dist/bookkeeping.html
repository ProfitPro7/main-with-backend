<!DOCTYPE html>
<html>
<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <title>ProfitPro</title>

  <!-- bootstrap core css -->
    <!--Find out why this is not working-->
  <link rel="stylesheet" type="text/css" href="/index-css/bootstrap.css" />
  <link rel="stylesheet" type="text/css" href="adminPage_user_table.css" />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet" />
  <!-- Custom styles for this template -->
  <link href="index-css/style.css" rel="stylesheet" />
  <!-- responsive style -->
  <link href="index-css/responsive.css" rel="stylesheet" />
</head>






  <!--Beginning of Page content-->
<body>
  <div class="hero_area">
    <!-- header section starts -->
    <header class="header_section">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg custom_nav-container ">
          <a class="navbar-brand" href="index.html">
            <span>
              ProfitPro
            </span>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

            <!--Nav Bar creation-->

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <div class="d-flex ml-auto flex-column flex-lg-row align-items-center">
              <ul class="navbar-nav  ">
                <li class="nav-item active">
                    <!--Need a home-->
                  <a class="nav-link" href="index.html">Home </a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link" href="bookkeeping.html"> Bookkeeping </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="reports.html"> Reports </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">
                    <span>User Settings</span> 
                  </a>
                </li>
                <li class="nav-item">
                  <!--Change later to only appear if user's account is
                    a Manager type-->
                  <a class="nav-link" href="adminPage.html"> Administrator <span class="sr-only">(current)</span></a>
                </li>
                  <!--Change later to only appear if user's account is
                    a Admin type-->
                <li class="nav-item">
                    <!--Change to be able to click on UsersName and change settings-->
                    <a class="nav-link" href="#" id='adminPage-userName'> JTonnesen-09-24<!--User Name--></a>
                </li>
               </ul>
              <div class="user_option">
                <form class="form-inline my-2 my-lg-0 ml-0 ml-lg-4 mb-3 mb-lg-0">
                  <button class="btn  my-2 my-sm-0 nav_search-btn" type="submit"></button>
                </form>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </header>
    <!-- end header section -->

      <!--Styling for website theme-->
    <style>
           body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; }
           header { background: blue; color: #ffffff;  text-align: center; }
           nav { margin-bottom: 10px }
           nav a { color: #ffffff; margin: 0 15px; text-decoration: none; }
           .container { width: 80%; margin: auto; overflow: hidden; }
           footer { background: blue; color: #ffffff; text-align: center; padding: 10px 0; position: relative; bottom: 0; width: 100%; }
           .administratorsection { display: flex; justify-content: space-around; margin: 20px 0; }
           .tab { overflow: hidden; border: 1px solid #ccc; background-color: #f1f1f1; }
           .tab button { background-color: inherit; float: left; border: none; outline: none; cursor: pointer; padding: 14px 16px; transition: 0.3s; }
           .tab button:hover { background-color: #ddd; }
           .tab button.active { background-color: #ccc; }
           .tabcontent { display: none; padding: 6px 12px; border: 1px solid #ccc; border-top: none; background-color: #f1f1f1; }
           fieldset { margin-bottom: 30px; }
           input { height: auto; display: block; width: 20%; margin: 5px; }
           input[id="bodyEmail"]{ width: 75%; padding: 60px; }
           tr { border-bottom: 1px solid black; width: 100%; }
           td { text-align: center; }
           table { width: 100%; }

       </style>

      <!--Styling for Clint's HTML-->
        <style>
            :root { --primary-color: #3498db; --secondary-color: #2c3e50; --background-color: #ecf0f1; --text-color: #34495e; --border-color: #bdc3c7; }
            .caf body { font-family: 'Arial', sans-serif; line-height: 1.6; color: var(--text-color); background-color: var(--background-color); margin: 0; padding: 20px; }
            .ca-container { max-width: 1000px; margin: 0 auto; background-color: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
            .caf h1, h2 { color: var(--secondary-color); margin-bottom: 20px; }
            .caf form { display: grid; gap: 15px; margin-bottom: 30px; }
            .caf label { font-weight: bold; }
            .caf input, select, textarea { width: 100%; padding: 8px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 14px; }
            .caf button { background-color: var(--primary-color); color: white; border: none; padding: 10px 15px; border-radius: 4px; cursor: pointer; font-size: 16px; transition: background-color 0.3s; width: 100%; }
            .caf button:hover { background-color: #2980b9; }
            .caf table { width: 100%; border-collapse: collapse; margin-top: 20px; background-color: white; }
            .caf th, td { border: 1px solid var(--border-color); padding: 12px; text-align: left; }
            .caf th { background-color: var(--primary-color); color: white; }
            #delete_Tables .caf th { background-color: red; color: white; }
            #accountsTable tbody tr:hover { background-color: #f5f5f5; cursor: pointer; }
            #delete_Tables tbody tr:hover { background-color: #f5f5f5; cursor: pointer; }
            #ledgerView { display: none; margin-top: 30px; background-color: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
            #ledgerTitle { color: var(--primary-color); margin-bottom: 15px; }


          /*Transition Effects*/

            .hidden { opacity: 0; visibility: hidden; transition: opacity 0.5s ease-out, visibility 0.5s ease-out; }

            .visible { opacity: 1; visibility: visible; transition: opacity 0.5s ease-in, visibility 0.5s ease-in; }



            /*Popup css*/
            .modal { display: flex; justify-content: center; align-items: center; position: fixed; z-index: 1; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.5); }

            .modal-content { background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 300px; border-radius: 5px; text-align: center; }

            .closeX { color: #aaa; float: right; font-size: 28px; font-weight: bold;
            }

            .closeX:hover, .closeX:focus { color: black; text-decoration: none; cursor: pointer; }

            .tooltip { position: relative; display: inline-block; border-bottom: 1px dotted black; }

          .tooltip .tooltiptext { visibility: hidden; width: 120px; background-color: black; color: #fff; text-align: center; border-radius: 6px; padding: 5px 0; /* Position the tooltip */ position: absolute; z-index: 1; top: -5px; left: 105%; } 
          .tooltip:hover .tooltiptext { visibility: visible; }

      </style>




      <!--Auto open first tabe script, set all others to inactive-->

       <script>
         document.addEventListener("DOMContentLoaded", function() {
           document.getElementById("defaultOpen").click();
         });
           function openTab(evt, cityName) {
               var i, tabcontent, tablinks;
               tabcontent = document.getElementsByClassName("tabcontent");
               for (i = 0; i < tabcontent.length; i++) {
                   tabcontent[i].style.display = "none";
               }

               tablinks = document.getElementsByClassName("tablinks");
               for (i = 0; i < tablinks.length; i++) {
                   tablinks[i].className = tablinks[i].className.replace(" active", "");
               }

               document.getElementById(cityName).style.display = "block";
               evt.currentTarget.className += " active";
           }
       </script>



<!--Nav bar for the bookkeeping page	-->
    <div class="container">
           <section id="bookkeepersection">
               <h2>BookKeeping</h2>
               <div class="services">
                   <div class="tab">
                       <button class="tablinks" onclick="openTab(event, 'Account')" id="defaultOpen">Create Account</button>
                       <button class="tablinks" onclick="openTab(event, 'Modify_Account')">Modify Accounts</button>
                   </div>




<!--Styling and divs for Users management page on AdminPage-->
  <div id="Account" class="tabcontent">
    <div id="mainContainer-accountCreation">

      <h2>Create Accounts</h2>

    <div class="ca-container">
                  <!--Change action link when deploying-->


        <form id="new-account-form-coa" class='caf' action="http://localhost:5001/profitpro-e81ab/us-central1/addAccountToCOA">



          <span style='display: inline;'>
            <label class='caf' for="accountName">Account Name:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="tooltipButton" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="tooltipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Enter a descriptive and unique name for the account </div>
          </div>  
          </span>
            <input class='caf' type="text" id="accountName" name="accountName" required>

                    <br>
                    
          <span style='display: inline;'>
            <label class='caf' for="accountNum">Account Number:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountNumTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountNumTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Provide the specific number assigned to this account </div>
          </div>  
          </span>

            <input class='caf' type="text" id="accountNum" name="accountNum" placeholder="e.g. 100, 200, 300... " required>
                    
                    <br>

          <span style='display: inline;'>
            <label class='caf' for="order">Account Order:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountOrderTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountOrderTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Enter the order or position of the account in the ledger. </div>
          </div>  
          </span>

            <input class='caf' type="text" id="order" name="order" placeholder="e.g. 1, 2, 3... " required>

                    <br>

          <span style='display: inline;'>
            <label class='caf' for="accountDesc">Account Description:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountDescTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountDescTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Provide a brief explanation of the purpose of the account </div>
          </div>  
          </span>

            <textarea id="accountDesc" class='caf' name="accountDesc" rows="3"></textarea>

                    <br>

          <span style='display: inline;'>
            <label class='caf' for="accountCategory">Account Category:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountCatTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountCatTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Select the appropriate category for the account </div>
          </div>  
          </span>

            <select id="accountCategory" class='caf' name="accountCategory" required>
                <option value="">Select category</option>
                <option value="Asset">Asset</option>
                <option value="Liability">Liability</option>
                <option value="Equity">Equity</option>
                <option value="Revenue">Revenue</option>
                <option value="Expense">Expense</option>
            </select>
                    <br><br>

          <span style='display: inline;'>
            <label class='caf' for="accountSubCategory">Account Subcategory:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountSubCatTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountSubCatTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Choose the relevant subcategory based on the account type </div>
          </div>  
          </span>

            <input class='caf' type="text" id="accountSubCategory" name="accountSubCategory" placeholder="e.g., Current Assets">

                    <br>


          <span style='display: inline;'>
            <label class='caf' for="normalSide">Normal Side:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountNormTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountNormTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Indicate whether the account normally carries a debit or credit balance </div>
          </div>  
          </span>

            <select id="normalSide" class='caf' name="normalSide" required>
                <option value="">Select normal side</option>
                <option value="Debit">Debit</option>
                <option value="Credit">Credit</option>
            </select>

                    <br>

            <hr>

                    <br>
            <h2 class='caf'>Ledger Information</h2>
                    <p style='color: grey;'>All monetary values must have proper comma sepeartion and at least two decimal places</p>

                    <br>
                    
  <!--const {accountName, accountNum, accountDesc, normalSide, accountCategory, accountSubCategory, initialBalance, debit, credit, balance, dateAdded, userId, order, statement, comment} = request.query;-->

          <span style='display: inline;'>
            <label class='caf' for="initialBalance">Initial Balance:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountBalTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountBalTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Enter the starting balance of the account when it was created </div>
          </div>  
          </span>

            <input class='caf' type="text" id="initialBalance" name="initialBalance" required>

                    <br>

          <span style='display: inline;'>
            <label class='caf' for="balance">Current Balance:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountCurrBalTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountCurrBalTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Provide the current balance of the account after transactions </div>
          </div>  
          </span>

            <input class='caf' type="text" id="balance" name="balance" required>

                    <br>

          <span style='display: inline;'>
            <label class='caf' for="debit">Debit:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountDebTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountDebTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Specify the amount debited to the account </div>
          </div>  
          </span>

            <input class='caf' type="text" id="debit" name="debit" required>

                    <br>

          <span style='display: inline;'>
            <label class='caf' for="credit">Credit:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountCredTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountCredTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Specify the amount credited to the account </div>
          </div>  
          </span>

            <input class='caf' type="text" id="credit" name="credit" required>

                    <br>

          <span style='display: inline;'>
            <label class='caf' for="statement">Statement Type:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountStatTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountStatTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Select whether the account affects the balance sheet or income statement </div>
          </div>  
          </span>

            <input class='caf' type="text" id="statement" name="statement"  placeholder="e.g. IS (Income statement), BS (Balance sheet), or RE (Retained Earnings statement)" required>

                    <br>
                        
          <span style='display: inline;'>
            <label class='caf' for="comment">Comment:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountComTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountComTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Add any additional information or notes relevant to the account </div>
          </div>  
          </span>

            <input class='caf' type="text" id="comment" name="comment" required>

                    <br>

          <span style='display: inline;'>
            <label class='caf' for="dateAdded">Current Date:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountDateTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountDateTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Enter today’s date or the date of the transaction </div>
          </div>  
          </span>
            <input class='caf' type="date" id="dateAdded" name="dateAdded" required>

                    <br>

          <span style='display: inline;'>
            <label class='caf' for="userId">User Id:</label>
          <div style="display: inline-block; position: relative; font-family: Arial, sans-serif;">
            <button id="accountUserTip" type='button' style="background-color: #3498db; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; margin-bottom: 20px;"> ? </button>
            <div id="accountUserTipText" style="display: none; background-color: #f9f9f9; color: #333; padding: 10px; border: 1px solid #ccc; border-radius: 5px; position: absolute; left: 110%; top: 0; z-index: 100; width: 200px;"> Provide the unique ID of the user creating or managing the account </div>
          </div>  
          </span>

            <input class='caf' type="text" id="userId" name="userId" required>

                    <br>

            <button class='caf' type='submit'>Add Account</button>
        </form>


  <script type="text/javascript" src="coa-js/jquery-3.4.1.min.js"></script>
  <script type="text/javascript" src="coa-js/bootstrap.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

  <!-- owl carousel script -->
  <script type="text/javascript">
    $(".owl-carousel").owlCarousel({
      loop: true,
      margin: 0,
      navText: [],
      center: true,
      autoplay: true,
      autoplayHoverPause: true,
      responsive: {
        0: {
          items: 1
        },
        1000: {
          items: 3
        }
      }
    });
  </script>


    <div id="popupOverlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); z-index: 1;">
      <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; padding: 20px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); z-index: 2; border-radius: 5px; text-align: center;">
        <h2 id="popUpTitle">User Created</h2>
        <p id="popUpMessage">Account has been created for the Chart of Accounts</p>
        <button id="overlayButton" class="close-button" onclick="closePopup()" style="background-color: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Close</button>
      </div>
    </div>


    </div>

<!--End of Manage users Tab-->
  </div> 
</div>


  <!--Update with table from adminPage-->
  <div id="Modify_Account" class="tabcontent">


    <div id="mainContainer-accountLedger">


    <div id='COA_Tables'>
    <!--Needs implementation-->
      <h2 id='coa_title'>Account Information</h2>

        <div id='button-list-div' class='hidden' style='text-align: right; display: none; padding: 10px;'>
          <span style='display: inline; padding:10px;'>
            <button id="deSelectAccount" style="border-radius: 25px; color: white; background-color: grey;">Back</button>
            <button id="modifyAccount" onclick="document.getElementById('popup').style.display ='';" style="border-radius: 25px; color: white; background-color: green;">Modify Account</button>
            <button id="deleteAccount" onclick="document.getElementById('delete-popup').style.display ='';" style="border-radius: 25px; color: white; background-color: red;">Deactivate Account</button>
          </span>
        </div>


        <div id="popup" class="modal" style='display: none;'>
          <div class="modal-content">
            <span class="closeX"  onclick='document.getElementById("popup").style.display="none";' style='text-align: right;' id="closePopup">&times;</span>
            <p>What would you like to do?</p>
            <button id="modifyAccount" onclick='document.getElementById("modify-account-info").style.display=""; document.getElementById("popup").style.display="none";'>Modify Account Information</button>
            <button id="viewLedger" onclick='document.getElementById("modify-ledger").style.display=""; document.getElementById("popup").style.display="none";'>Modify Account Ledger</button>
          </div>
        </div>

        <div id="delete-popup" class="modal" style='display: none;'>
          <div class="modal-content">
            <span class="closeX"  onclick='document.getElementById("delete-popup").style.display="none";' style='text-align: right;' id="closePopup">&times;</span>
            <p>Are you sure you want to deactivate this Account?</p>
            <span style='display: flex; text-align: right;'>
              <form id='deactivateAccountForm' action='http://localhost:5001/profitpro-e81ab/us-central1/deactivateAccountCOA'>
                <input id='deleteAccountButton' name='accountId' style='display: none;'>
                <button type='submit' style='background-color: green; border-radius: 25px; padding: 5px; width: 60px;'>Yes</button>
              </form>
              <button id="viewLedger" onclick='document.getElementById("delete-popup").style.display="none";' style='background-color: red; border-radius: 25px; padding: 5px; width: 60px;'>No</button>
            </span>
          </div>
        </div>





      <table id="accountsTable" class='caf'>
        <thead class='caf'>
          <tr class='caf'>
            <th class='caf'>Account Number</th>
            <th class='caf'>Account Name</th>
            <th class='caf'>Description</th>
            <th class='caf'>Normal Side</th>
            <th class='caf'>Category</th>
            <th class='caf'>Subcategory</th>
          </tr>
        </thead>
        <tbody id="coa_table" class='caf'>

          <!-- Accounts will be added here dynamically -->
        </tbody>
      </table>
    </div>


                <!--Modify Account form-->
                <div id='modify-account-info' style="display: none; ">
                  <hr><h4>Modify Account Information</h4><hr>
                  <form id="modify-account-form-coa" action="http://localhost:5001/profitpro-e81ab/us-central1/modifyAccountInformation" style="display: flex; flex-direction: column; gap: 15px; padding: 20px; border: 1px solid #ccc; border-radius: 8px; background-color: #f9f9f9;">
                    <input type="text" id='modify-source' name='source' style='display:none'>

                    <div style="display: flex; gap: 15px; align-items: center; width:100%;/*! margin-left: ; */">
                      <div>
                        <label for="modify-accountName" style="display: block; margin-bottom: 5px;">Account Name:</label>
                        <input type="text" id="modify-accountName" name="accountName" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 200px;">
                      </div>
                      <div>
                        <label for="modify-accountNum" style="display: block; margin-bottom: 5px;">Account Number:</label>
                        <input type="text" id="modify-accountNum" name="accountNum" placeholder="e.g. 100, 200, 300..." style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 200px;">
                      </div>
                      <div>
                        <label for="modify-order" style="display: block; margin-bottom: 5px;">Account Order:</label>
                        <input type="text" id="modify-order" name="order" placeholder="e.g. 1, 2, 3..." style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 200px;">
                      </div>

                      <div>
                        <label for="modify-accountCategory" style="display: block; margin-bottom: 5px;">Account Category:</label>
                        <select id="modify-accountCategory" name="accountCategory"  style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 160px;">
                          <option value="">Select category</option>
                          <option value="Asset">Asset</option>
                          <option value="Liability">Liability</option>
                          <option value="Equity">Equity</option>
                          <option value="Revenue">Revenue</option>
                          <option value="Expense">Expense</option>
                        </select>
                      </div>
                      <div>
                        <label for="modify-normalSide" style="display: block; margin-bottom: 5px;">Normal Side:</label>
                        <select id="modify-normalSide" name="normalSide" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 160px;">
                          <option value="">Select normal side</option>
                          <option value="Debit">Debit</option>
                          <option value="Credit">Credit</option>
                        </select>
                      </div>

                    </div>

                    <div>
                      <label for="modify-accountDesc" style="display: block; margin-bottom: 5px;">Account Description:</label>
                      <textarea id="modify-accountDesc" name="accountDesc" rows="3" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;"></textarea>
                    </div>

                    <div style="display: flex; gap: 15px; align-items: center;">


                    </div>

                    <div>
                      <label for="modify-accountSubCategory" style="display: block; margin-bottom: 5px;">Account Subcategory:</label>
                      <input type="text" id="modify-accountSubCategory" name="accountSubCategory" placeholder="e.g., Current Assets" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 100%;">
                    </div>

                    <span style="display: inline; text-align: center;">
                      <button type="submit" style="color: white; background-color: green; border: none; border-radius: 4px; padding: 10px 15px; cursor: pointer;">Add Account</button>
                      <button type="button" onclick='document.getElementById("modify-account-info").style.display="none";' style="color: white; background-color: red; border: none; border-radius: 4px; padding: 10px 15px; cursor: pointer;">× Cancel</button>
                    </span>
                  </form>
                </div>

    <div id="modify-popupOverlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); z-index: 1;">
      <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; padding: 20px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); z-index: 2; border-radius: 5px; text-align: center;">
        <h2 id="modify-popUpTitle">Account Modified</h2>
        <p id="modify-popUpMessage">Account has been modified for the Chart of Accounts</p>
        <button id="modify-overlayButton" class="close-button" onclick="closeModifyPopup()" style="background-color: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Close</button>
      </div>
    </div>





        <div id="ledgerView" class='hidden'>
            <h2>Account Ledger</h2>
            <h3 id="ledgerTitle"></h3>
            <table id="ledgerTable" class='caf'>
                <thead class='caf'>
                    <tr class='caf'>
                        <th class='caf'>Date</th>
                        <th class='caf'>Description</th>
                        <th class='caf'>Debit</th>
                        <th class='caf'>Credit</th>
                        <th class='caf'>Balance</th>
                    </tr>
                </thead>
                <tbody id='ledger-table'>
                    <!-- Ledger entries will be added here dynamically -->
                </tbody>
            </table>


        </div>

        <!--Modify Ledger form-->
        <div id='modify-ledger' style="display: none; ">
          <hr><h4>Add Record to Ledger</h4><hr>
          <form id="modify-ledger-form-coa" action="http://localhost:5001/profitpro-e81ab/us-central1/modifyAccountLedger" style="display: flex; flex-direction: column; gap: 15px; padding: 20px; border: 1px solid #ccc; border-radius: 8px; background-color: #f9f9f9;">

              <input type="text" id='ledger-source' name='source' style='display:none'>

            <div style="display: flex; gap: 15px; align-items: center; width:100%;/*! margin-left: ; */">
              <div>
                <label for="ledger-date" style="display: block; margin-bottom: 5px;">Date:</label>
                <input type="date" id="ledger-date" name="dateAdded" required="" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 200px;">
              </div>
              <div>
                <label for="ledger-debit" style="display: block; margin-bottom: 5px;">Debit:</label>
                <input type="text" id="ledger-debit" name="debit" required="" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 200px;">
              </div>
              <div>
                <label for="ledger-credit" style="display: block; margin-bottom: 5px;">Credit:</label>
                <input type="text" id="ledger-credit" name="credit" required="" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 200px;">
              </div>
              <div>
                <label for="ledger-balance" style="display: block; margin-bottom: 5px;">Balance:</label>
                <input type="text" id="ledger-balance" name="balance" required="" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 200px;">
              </div>


            </div>
            <div>
              <label for="ledger-desc" style="display: block; margin-bottom: 5px;">Record Description:</label>
              <textarea id="ledger-accountDesc" name="description" rows="3" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;"></textarea>
            </div>

            <span style="display: inline; text-align: center;">
              <button type="submit" style="color: white; background-color: green; border: none; border-radius: 4px; padding: 10px 15px; cursor: pointer;">Add Record</button>
              <button type="button" onclick='document.getElementById("modify-ledger").style.display="none";' style="color: white; background-color: red; border: none; border-radius: 4px; padding: 10px 15px; cursor: pointer;">× Cancel</button>
            </span>
          </form>
        </div>




    </div>



  </div>


  <!-- footer section -->
  <section class="container-fluid footer_section">
    <p>
      &copy; ProfitPro LLC
    </p>
  </section>
  <!-- footer section -->
</div>


  <!--Form handler script to stop the page from auto refreshing, as well as handling the response from the API to create an account -->
  <script>
  async function handleFormSubmission(formId) {
    const form = document.getElementById(`${formId}`);

    form.addEventListener("submit", async function(event) {
      event.preventDefault();
      console.log("form prevented");

      //input validation -----------------------------------------------------------------

      //Requirement 5: Account numbers should not have decimal spaces or alphanumeric values (also musst be a factor of 100)
      const num = document.getElementById("accountNum").value;
      const regex = /^[1-9][0-9]*00$/;

      if (!regex.test(num)) {
        console.error(`Account num does not match regex: ${num}`);
        document.getElementById("popUpTitle").innerHTML = "Account Creation Denied";
        document.getElementById("popUpMessage").innerHTML = "<h4>Account Number must:</h4> <ul style='list-style-type: none; text-align: center'> <li style='text-align: left;'>- Not have any decimals</li> <li style='text-align: left;'>- Be a multiple of 100 (100,200,300..)</li> <li style='text-align: left;'>- Not contain any letters</li></ul>";
        document.getElementById("overlayButton").style.backgroundColor = "#e33030";
        showPopup();
        return;
      }
      //End Requirement 5


      //Requirement 3: All monetary values must have two decimal spaces

        //monetary values in form: 

      const initBal = monetaryValidation(document.getElementById("initialBalance").value);
      const bal = monetaryValidation(document.getElementById("balance").value);
      const deb = monetaryValidation(document.getElementById("debit").value);
      const cred = monetaryValidation(document.getElementById("credit").value);

      //if value has proper comma placement and two decimal places returns true, else returns formatted value

      if (initBal !== true ){
        document.getElementById("initialBalance").value = initBal;

      }
      if (bal !== true ){
        document.getElementById("balance").value = bal;

      }
      if (deb !== true ){
        document.getElementById("debit").value = deb;

      }
      if (cred !== true ){
        document.getElementById("credit").value = cred;

      }

      //End Requirement 3





      //input validation -----------------------------------------------------------------


      const input = new FormData(event.target);
      const queryParams = new URLSearchParams(input).toString();
      const url = `${event.target.action}?${queryParams}`;

      try {
        const API_response = await fetch(url, {
          method: "GET"
        });

        const result = await API_response.json();

        const message = result.message;

        if (API_response.ok) {
          document.getElementById("popUpMessage").innerHTML = `${message}`;
          showPopup();
        }else{
          document.getElementById("popUpTitle").innerHTML = "Account Creation Denied";
          document.getElementById("popUpMessage").innerHTML = `${message}`;
          document.getElementById("overlayButton").style.backgroundColor = "#e33030";
          showPopup();
        }
      } catch (e) {
        console.log(e);
      }

    });
  }

  //script to show and close confirmation message "User has been created" 
  function showPopup() {
    document.getElementById('popupOverlay').style.display = 'block';
  }

  function closePopup() {
    document.getElementById('popupOverlay').style.display = 'none';
    location.reload(); // Refresh the page
  }

  function monetaryValidation(value){
    const commaValidation = /^(?!0\d)(\d{1,3}(,\d{3})*(\.\d{2})?)?$/;
    const decimalValidation = /^\d+\.\d{2}$/;

    if (commaValidation.test(value) && decimalValidation.test(value)){
      return true;

    }else{

      const val = parseFloat(value.replace(/,/g, ''));
      let validated = Intl.NumberFormat('en-US', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
      }).format(val);

      return validated;
    }
  }


  async function handleModifyFormSubmission(formId) {
    const form = document.getElementById(`${formId}`);

    form.addEventListener("submit", async function(event) {
      event.preventDefault();
      console.log("form prevented");

      const input = new FormData(event.target);
      const queryParams = new URLSearchParams(input).toString();
      const url = `${event.target.action}?${queryParams}`;

      try {
        const API_response = await fetch(url, {
          method: "GET"
        });

        const result = await API_response.json();

        const message = result.message;

        if (API_response.ok) {
          document.getElementById("modify-popUpMessage").innerHTML = `${message}`;
          showModifyPopup();
        }else{
          document.getElementById("modify-popUpTitle").innerHTML = "Account Modification Denied";
          document.getElementById("modify-popUpMessage").innerHTML = `${message}`;
          document.getElementById("modify-overlayButton").style.backgroundColor = "#e33030";
          showModifyPopup();
        }
      } catch (e) {
        console.log(e);
      }

    });
  }

  function showModifyPopup() {
    document.getElementById('modify-popupOverlay').style.display = 'block';
  }

  function closeModifyPopup() {
    document.getElementById('modify-popupOverlay').style.display = 'none';
    location.reload(); // Refresh the page
  }


  async function handleLedgerFormSubmission(formId) {
    const form = document.getElementById(`${formId}`);

    form.addEventListener("submit", async function(event) {
      event.preventDefault();
      console.log("form prevented");

      const input = new FormData(event.target);
      const queryParams = new URLSearchParams(input).toString();
      const url = `${event.target.action}?${queryParams}`;

      try {
        const API_response = await fetch(url, {
          method: "GET"
        });

        const result = await API_response.json();

        const message = result.message;

        if (API_response.ok) {
          document.getElementById("modify-popUpTitle").innerHTML = "Ledger Entry Added";
          document.getElementById("modify-popUpMessage").innerHTML = `${message}`;
          showModifyPopup();
        }else{
          document.getElementById("modify-popUpTitle").innerHTML = "Ledger Entry Denied";
          document.getElementById("modify-popUpMessage").innerHTML = `${message}`;
          document.getElementById("modify-overlayButton").style.backgroundColor = "#e33030";
          showModifyPopup();
        }
      } catch (e) {
        console.log(e);
      }

    });
  }

  async function handleDeactivateFormSubmission(formId) {
    const form = document.getElementById(`${formId}`);

    form.addEventListener("submit", async function(event) {
      event.preventDefault();
      console.log("form prevented");

      const input = new FormData(event.target);
      const queryParams = new URLSearchParams(input).toString();
      const url = `${event.target.action}?${queryParams}`;

      try {
        const API_response = await fetch(url, {
          method: "GET"
        });

        const result = await API_response.json();

        const message = result.message;

        if (API_response.ok) {
          document.getElementById("modify-popUpTitle").innerHTML = "Account Deactivated";
          document.getElementById("modify-popUpMessage").innerHTML = `${message}`;
          showModifyPopup();
        }else{
          document.getElementById("modify-popUpTitle").innerHTML = "Account Could Not Be Deactivated";
          document.getElementById("modify-popUpMessage").innerHTML = `${message}`;
          document.getElementById("modify-overlayButton").style.backgroundColor = "#e33030";
          showModifyPopup();
        }
      } catch (e) {
        console.log(e);
      }

    });
  }





  //reuses the form submission handler function for multiple tabs as each have forms
  document.addEventListener("DOMContentLoaded", function() {
    handleFormSubmission("new-account-form-coa");
    handleModifyFormSubmission("modify-account-form-coa");
    handleLedgerFormSubmission("modify-ledger-form-coa");
    handleDeactivateFormSubmission('deactivateAccountForm');
  });


  </script>
<!---->
<!--<script>-->
<!--    const tooltipButton = document.getElementById('tooltipButton');-->
<!--    const tooltipText = document.getElementById('tooltipText');-->
<!---->
<!--    tooltipButton.addEventListener('click', () => {-->
<!--        tooltipText.style.display = tooltipText.style.display === 'none' ? 'block' : 'none';-->
<!--    });-->
<!---->
<!--    // Close the tooltip when clicking outside of it-->
<!--    document.addEventListener('click', (event) => {-->
<!--        if (!tooltipButton.contains(event.target)) {-->
<!--            tooltipText.style.display = 'none';-->
<!--        }-->
<!--    });-->
<!--</script>-->

<script>
function createTooltip(buttonId, tooltipTextId) {
    const tooltipButton = document.getElementById(buttonId);
    const tooltipText = document.getElementById(tooltipTextId);

    tooltipButton.addEventListener('click', (event) => {
        tooltipText.style.display = tooltipText.style.display === 'none' ? 'block' : 'none';
    });

    // Close the tooltip when clicking outside of it
    document.addEventListener('click', (event) => {
        if (!tooltipButton.contains(event.target)) {
            tooltipText.style.display = 'none';
        }
    });
}


createTooltip("tooltipButton","tooltipText");

createTooltip("accountNumTip", "accountNumTipText");
createTooltip("accountOrderTip", "accountOrderTipText");
createTooltip("accountDescTip", "accountDescTipText");
createTooltip("accountCatTip", "accountCatTipText");
createTooltip("accountSubCatTip", "accountSubCatTipText");
createTooltip("accountNormTip", "accountNormTipText");
createTooltip("accountBalTip", "accountBalTipText");
createTooltip("accountCurrBalTip", "accountCurrBalTipText");
createTooltip("accountDebTip", "accountDebTipText");
createTooltip("accountCredTip", "accountCredTipText");
createTooltip("accountStatTip", "accountStatTipText");
createTooltip("accountComTip", "accountComTipText");
createTooltip("accountDateTip", "accountDatTipText");
createTooltip("accountUserTip", "accountUserTipText");
</script>






  <script type='module' src='main.js'></script>

  <script type="text/javascript" src="js-for-index/jquery-3.4.1.min.js"></script>
  <script type="text/javascript" src="js-for-index/bootstrap.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js">
  </script>

</body>

</html>

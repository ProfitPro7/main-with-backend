<div class="ratios-container">
    <!-- Current Ratio Card -->
    <div class="ratio-card">
        <div class="ratio-header">
            <h3>Current Ratio</h3>
            <div class="ratio-formula">Current Assets / Current Liabilities</div>
        </div>
        
        <div class="ratio-value" id="currentRatio">
            <span class="number">{{ currentRatio | number:'.2' }}</span>
            <span class="indicator" :class="getRatioIndicatorClass(currentRatio)">
                <i class="fas" :class="getRatioIndicatorIcon(currentRatio)"></i>
            </span>
        </div>

        <div class="speedometer">
            <div class="dial"></div>
            <div class="needle" :style="{ transform: `rotate(${getRatioRotation(currentRatio)}deg)` }"></div>
            <div class="center-point"></div>
        </div>

        <div class="ratio-legend">
            <span class="poor"> 1.0</span>
            <span class="good">1.0 - 3.0</span>
            <span class="excess"> 3.0</span>
        </div>
    </div>

    <!-- Acid-Test Ratio Card -->
    <div class="ratio-card">
        <div class="ratio-header">
            <h3>Acid-Test Ratio</h3>
            <div class="ratio-formula">
                (Cash + Short-term Investments + Net Accounts Receivable) / Current Liabilities
            </div>
        </div>
        
        <div class="ratio-value" id="acidTestRatio">
            <span class="number">{{ acidTestRatio | number:'.2' }}</span>
            <span class="indicator" :class="getRatioIndicatorClass(acidTestRatio)">
                <i class="fas" :class="getRatioIndicatorIcon(acidTestRatio)"></i>
            </span>
        </div>

        <div class="speedometer">
            <div class="dial"></div>
            <div class="needle" :style="{ transform: `rotate(${getAcidTestRotation(acidTestRatio)}deg)` }"></div>
            <div class="center-point"></div>
        </div>

        <div class="ratio-legend">
            <span class="poor">1.0</span>
            <span class="good">1.0 - 1.5</span>
            <span class="excess">> 1.5</span>
        </div>
    </div>

    <!-- Debt to Assets Ratio Card -->
    <div class="ratio-card">
        <div class="ratio-header">
            <h3>Debt to Assets Ratio</h3>
            <div class="ratio-formula">Total Liabilities / Total Assets</div>
        </div>
        
        <div class="ratio-value" id="debtToAssetsRatio">
            <span class="number">{{ debtToAssetsRatio | number:'.2' }}</span>
            <span class="indicator" :class="getRatioIndicatorClass(debtToAssetsRatio)">
                <i class="fas" :class="getRatioIndicatorIcon(debtToAssetsRatio)"></i>
            </span>
        </div>

        <div class="speedometer">
            <div class="dial"></div>
            <div class="needle" :style="{ transform: `rotate(${getDebtToAssetsRotation(debtToAssetsRatio)}deg)` }"></div>
            <div class="center-point"></div>
        </div>

        <div class="ratio-legend">
            <span class="good">0.4</span>
            <span class="excess">0.4 - 0.6</span>
            <span class="poor"> 0.6</span>
        </div>
    </div>
</div>

<style>
    .ratios-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        padding: 20px;
    }

    .ratio-card {
        background: white;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .ratio-header {
        margin-bottom: 15px;
    }

    .ratio-formula {
        color: #666;
        font-size: 0.9em;
    }

    .ratio-value {
        font-size: 2em;
        font-weight: bold;
        margin: 15px 0;
        transform: rotate(0deg);
    }

    .speedometer {
        position: relative;
        width: 200px;
        height: 100px;
        margin: 20px auto;
        overflow: visible;
        transform: rotate(180deg);
    }

    .dial {
        position: absolute;
        top: 0;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        border: 10px solid #eee;
        border-bottom-color: #ff4444;
        border-left-color: #4CAF50;
        border-top-color: #ff9800;
        box-sizing: border-box;
    }

    .needle {
        position: absolute;
        top: 0;
        left: 50%;
        width: 2px;
        height: 90px;
        background: #333;
        transform-origin: top center;
        transform: rotate(0deg);
        transition: transform 0.3s ease;
    }

    .center-point {
        position: absolute;
        top: 0;
        left: 50%;
        width: 10px;
        height: 10px;
        background: #333;
        border-radius: 50%;
        transform: translateX(-50%);
    }

    .ratio-legend {
        margin-top: 10px;
        text-align: center;
        transform: rotate(0deg);
    }

    .ratio-legend span {
        margin: 0 10px;
    }

    .ratio-legend .poor { color: #ff4444; }
    .ratio-legend .good { color: #4CAF50; }
    .ratio-legend .excess { color: #ff9800; }
</style>

<script>
    function getRatioRotation(ratio) {
        // For Current Ratio:
        // ratio < 1.0 = 240 to 180 degrees (poor)
        // ratio 1.0-3.0 = 180 to 90 degrees (good)
        // ratio > 3.0 = 90 to 0 degrees (excess)
        
        if (ratio < 1.0) {
            return 240 - (ratio * 60);
        } else if (ratio <= 3.0) {
            return 180 - ((ratio - 1.0) * 45);
        } else {
            return Math.max(0, 90 - ((ratio - 3.0) * 30));
        }
    }

    // For Acid-Test Ratio, use different thresholds:
    function getAcidTestRotation(ratio) {
        if (ratio < 1.0) {
            return 240 - (ratio * 60);
        } else if (ratio <= 1.5) {
            return 180 - ((ratio - 1.0) * 90);
        } else {
            return Math.max(0, 90 - ((ratio - 1.5) * 60));
        }
    }

    function getDebtToAssetsRotation(ratio) {
        // For Debt to Assets Ratio:
        // ratio < 0.4 = 0 to 90 degrees (good)
        // ratio 0.4-0.6 = 90 to 180 degrees (caution)
        // ratio > 0.6 = 180 to 240 degrees (poor)
        
        if (ratio < 0.4) {
            return ratio * 225;
        } else if (ratio <= 0.6) {
            return 90 + ((ratio - 0.4) * 450);
        } else {
            return Math.min(240, 180 + ((ratio - 0.6) * 300));
        }
    }
</script>
